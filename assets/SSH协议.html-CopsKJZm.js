import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as c,c as l,a as e,d as s,e as t,b as p}from"./app-BzW9chhs.js";const r={},i=e("h1",{id:"ssh",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#ssh"},[e("span",null,"SSH")])],-1),h=e("strong",null,"协议",-1),d={href:"http://www.openssh.com/",target:"_blank",rel:"noopener noreferrer"},u=p(`<p>用 ssh 远程登录，需要用户名和主机地址。</p><div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">ssh</span> user@host
</code></pre></div><p>ssh 的默认端口是 22，可以通过命令指定端口。</p><div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">ssh</span> <span class="token parameter variable">-p</span> <span class="token number">2222</span> user@host
</code></pre></div><p>ssh 的加密解密使用的是非对称加密算法，默认为 RSA 算法。</p><h2 id="密码登录" tabindex="-1"><a class="header-anchor" href="#密码登录"><span>密码登录</span></a></h2><p>第一次登录一台主机，会出现如下提示。</p><div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">ssh</span> yourname@12.18.429.21

The authenticity of <span class="token function">host</span> <span class="token string">&#39;host (12.18.429.21)&#39;</span> can&#39;t be established.
RSA key fingerprint is <span class="token number">98</span>:2e:d7:e0:de:9f:ac:67:28:c2:42:2d:37:16:58:4d.
Are you sure you want to <span class="token builtin class-name">continue</span> connecting <span class="token punctuation">(</span>yes/no<span class="token punctuation">)</span>?
</code></pre></div><p>RSA 公钥的长度一般为 1024 位，为便于显示和比对，对其进行 MD5 计算得到一个 128 位的指纹。确认这个指纹和远程主机公开的公钥指纹一致后，用户可以接受这个公钥。公钥被接受后，会保存在 <code>~/.ssh/known_hosts</code> 文件中。</p><div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">cat</span> ~/.ssh/known_hosts

github.com ssh-rsa AAAAB3NzaC1yc2E<span class="token punctuation">..</span>.
</code></pre></div><p>接受主机公钥后，输入密码登录即可。</p><p>密码登录的过程：</p><ol><li>主机收到用户登录请求，把自己的公钥发给用户</li><li>用户用主机公钥加密密码，然后发给主机</li><li>主机用私钥解密</li></ol><h2 id="免密登录" tabindex="-1"><a class="header-anchor" href="#免密登录"><span>免密登录</span></a></h2><p>密码登录每次都需要输入密码，用主机公钥加密后发送；免密登录只需第一次登录需要密码。</p><p>免密登录过程，假设 A 免密登录 B：</p><img src="https://raw.githubusercontent.com/yamsfeer/pic-bed/master/ssh免密登录.png" class="img-mid"><ol><li>将 A 的公钥储存在 B 上。</li><li>B 用 <strong>A 的公钥</strong>加密一段随机字符串并发送给 A</li><li>A 用<strong>私钥解密</strong>然后回传给 B</li><li>B 比对字符串</li></ol><p>生成公私钥。</p><div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>ssh-keygen
</code></pre></div><p>生成公钥后传输给远程主机。</p><div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>ssh-copy-id user@host
</code></pre></div><p>查看远程主机的信任列表。</p><div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">cat</span> ~/.ssh/authorized_keys
</code></pre></div><p>公钥就是一段字符串，<code>authorized_keys</code> 里将包含你的公钥。</p><p>综上，<code>~/.ssh/</code> 下一般会有以下几个文件。</p><div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>id_rsa      <span class="token comment"># 私钥</span>
id_rsa.pub  <span class="token comment"># 公钥</span>
known_hosts <span class="token comment"># 远程主机的公钥列表</span>
authorized_keys <span class="token comment"># 可免密登录本机的公钥列表</span>
</code></pre></div><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2>`,28),g={href:"https://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html",target:"_blank",rel:"noopener noreferrer"};function m(A,_){const a=o("ExternalLinkIcon");return c(),l("div",null,[i,e("p",null,[s("ssh ( secure shell ) 是一种"),h,s("，用于计算机之间的加密登录。ssh 有各种实现，本文针对的是 "),e("a",d,[s("OpenSSH"),t(a)]),s("。")]),u,e("p",null,[e("a",g,[s("SSH原理与运用（一）：远程登录"),t(a)])])])}const b=n(r,[["render",m],["__file","SSH协议.html.vue"]]),k=JSON.parse('{"path":"/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E8%AE%A1%E7%AE%97%E6%9C%BA%E9%80%9A%E8%AF%86/SSH%E5%8D%8F%E8%AE%AE.html","title":"SSH","lang":"zh-CN","frontmatter":{"description":"SSH ssh ( secure shell ) 是一种协议，用于计算机之间的加密登录。ssh 有各种实现，本文针对的是 OpenSSH。 用 ssh 远程登录，需要用户名和主机地址。 ssh 的默认端口是 22，可以通过命令指定端口。 ssh 的加密解密使用的是非对称加密算法，默认为 RSA 算法。 密码登录 第一次登录一台主机，会出现如下提示。 R...","head":[["meta",{"property":"og:url","content":"https://yamsfeer.github.io/notes-cs/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E8%AE%A1%E7%AE%97%E6%9C%BA%E9%80%9A%E8%AF%86/SSH%E5%8D%8F%E8%AE%AE.html"}],["meta",{"property":"og:site_name","content":"yamsfeer"}],["meta",{"property":"og:title","content":"SSH"}],["meta",{"property":"og:description","content":"SSH ssh ( secure shell ) 是一种协议，用于计算机之间的加密登录。ssh 有各种实现，本文针对的是 OpenSSH。 用 ssh 远程登录，需要用户名和主机地址。 ssh 的默认端口是 22，可以通过命令指定端口。 ssh 的加密解密使用的是非对称加密算法，默认为 RSA 算法。 密码登录 第一次登录一台主机，会出现如下提示。 R..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-12T15:44:18.000Z"}],["meta",{"property":"article:modified_time","content":"2024-04-12T15:44:18.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"SSH\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-04-12T15:44:18.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"密码登录","slug":"密码登录","link":"#密码登录","children":[]},{"level":2,"title":"免密登录","slug":"免密登录","link":"#免密登录","children":[]},{"level":2,"title":"参考","slug":"参考","link":"#参考","children":[]}],"git":{"createdTime":1712936658000,"updatedTime":1712936658000,"contributors":[{"name":"yamsfeer","email":"feer.yams@gmail.com","commits":1}]},"readingTime":{"minutes":1.86,"words":557},"filePathRelative":"计算机基础/计算机通识/SSH协议.md","localizedDate":"2024年4月12日","autoDesc":true}');export{b as comp,k as data};
