# 动态规划算法

## 基本思想

动态规划是多阶段的决策过程，每步求解的问题是后阶段求解问题的子问题，每步决策依赖于以前步骤的决策结果。

### 优化原则

优化原则：一个最优决策序列的任何子序列一定是相对于子序列的初始和结束状态的最优决策序列。

也就是说，**当子序列变得更优时，整个决策序列也会变得更优**。

优化原则非常重要，**不满足优化原则的问题不能使用动态规划算法求解**。

## 最短路径

问题：有起点集$S=\{s_1,\dots,s_n\}$，终点集$T=\{t_1,\dots,t_n\}$，中间点集和边集$E$，边有长度，求起点到终点的最短路径。

蛮力算法： 计算所有可能的路径，从中找出最短路径。

时间复杂度：如果有$k$层节点，则会有$2^k$条路径。

### 动态规划求解

观察以下例子，在中间结点$c_1 \sim c_4$中，记录较小代价的路径，比如$c_1$到终点的较小代价是2，记录为$up,2$。

![](https://raw.githubusercontent.com/yamsfeer/pic-bed/master/008i3skNgy1gu3v5pmpt7j60b007kjrw02.jpg)

从中间结点$b_k$到终点的路径中，需要先到达$c_m$再到达$t_n$，因此需要选择$b\to c + c\to t$最小的最径。

以$b_2$为例，$b_2$向上到$c_1$的代价为3，$c_1$到$t$的最小代价已知为2，因此$b_2 \to t$的最小代价为5（另一条路径$b_2 \to c_2 \to t$至少为9）。

所有结点的代价记录如下图：

![](https://raw.githubusercontent.com/yamsfeer/pic-bed/master/008i3skNgy1gu3vi6ihcqj60bd0943zb02.jpg)

此时可以得出最短路径为：

* $s_3 \to a_3 \to b_4 \to c_4 \to t_4$
* $s_5 \to a_4 \to b_4 \to c_4 \to t_4$

由此可以看出上述算法的决策是由后往前推的。由$c \to t$推出$b \to t$，最终到$s\to t$。

![](https://raw.githubusercontent.com/yamsfeer/pic-bed/master/008i3skNgy1gu4rdc70ddj60co052t8r02.jpg)

这样类推是因为对一条$s\to t$的最短路径来说，任一中间结点到$t$的距离也一定是最短的。（满足优化原则）

### 反例

**不满足优化原则时不能用动态规划算法求解**。

举个反例：求一条路径，使得路径长度对10取模为0

如果使用动态规划算法，路径为下上上上，长度为11，模为1

![](https://raw.githubusercontent.com/yamsfeer/pic-bed/master/008i3skNgy1gu4sn1b0qrj60de02d74b02.jpg)

而事实上，这个问题的解是下下下下，长度为20，模为0。

这个问题的最优序列与它的子序列是否为最优没有必然联系，不能用动态规划算法。
